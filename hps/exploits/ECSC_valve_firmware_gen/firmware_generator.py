from firmware_utils import *

extractor = b"""
#!/bin/bash
echo "Extracting firmware..."
unzip data.zip -d target
cd target
find . -type f -exec sha256sum {} \; | sha256sum
"""

data = open("test_data.zip", "rb").read()
inner_hash = b"d62f1effc7ea8c890f60d9bc37dc5c6b5ade7487b333465c654ced0a25851390"
target = open("test.bin", "wb")


packed = pack(extractor, data, inner_hash)
target.write(packed)
target.close()